# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env.test –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤

## ‚úÖ –§–∞–π–ª —Å–æ–∑–¥–∞–Ω!

–§–∞–π–ª `.env.test` —É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å

### 1. Telegram API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–ü–æ–ª—É—á–∏—Ç–µ –Ω–∞ https://my.telegram.org:

1. –í–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "API development tools"
3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `api_id` –∏ `api_hash`

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤ `.env.test`:
```env
TELEGRAM_API_ID=–≤–∞—à_api_id
TELEGRAM_API_HASH=–≤–∞—à_api_hash
```

### 2. –¢–µ—Å—Ç–æ–≤—ã–µ –±–æ—Ç—ã (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–°–æ–∑–¥–∞–π—Ç–µ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram:

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –±–æ—Ç–∞:
   ```
   /newbot
   –ò–º—è: Lumi Test Master Bot
   Username: lumi_test_master_bot
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω
4. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–≥–æ –±–æ—Ç–∞:
   ```
   /newbot
   –ò–º—è: Lumi Test Client Bot
   Username: lumi_test_client_bot
   ```
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤ `.env.test`:
```env
TEST_MASTER_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–ø–µ—Ä–≤–æ–≥–æ_–±–æ—Ç–∞
TEST_CLIENT_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–≤—Ç–æ—Ä–æ–≥–æ_–±–æ—Ç–∞
TEST_MASTER_BOT_USERNAME=lumi_test_master_bot
TEST_CLIENT_BOT_USERNAME=lumi_test_client_bot
```

### 3. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ –∂–µ —Ç–æ–∫–µ–Ω—ã, —á—Ç–æ –∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤:

```env
BOT_TOKEN=—Ç–æ–∫–µ–Ω_–ø–µ—Ä–≤–æ–≥–æ_–±–æ—Ç–∞
CLIENT_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–≤—Ç–æ—Ä–æ–≥–æ_–±–æ—Ç–∞
CLIENT_BOT_USERNAME=lumi_test_client_bot
```

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–û—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ):

```env
TEST_DATABASE_URL=sqlite:///test_database_e2e.db
DATABASE_URL=sqlite:///test_database_e2e.db
```

### 5. –°—É–ø–µ—Ä–∞–¥–º–∏–Ω—ã (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

–£–∑–Ω–∞–π—Ç–µ –≤–∞—à Telegram ID —á–µ—Ä–µ–∑ @userinfobot:

```env
SUPER_ADMINS=–≤–∞—à_telegram_id
```

### 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

- **YooKassa** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- **OpenAI API** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π
- **–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω—ã –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üöÄ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–æ—Ç—ã:**
   ```bash
   python run_test_bots.py
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:**
   ```bash
   pytest tests/e2e/telethon_e2e/ -v -m e2e_telethon
   ```