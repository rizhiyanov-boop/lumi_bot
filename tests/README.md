# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Paintball Bot

## üß™ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ unit/           # Unit —Ç–µ—Å—Ç—ã - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ integration/    # Integration —Ç–µ—Å—Ç—ã - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ë–î
‚îú‚îÄ‚îÄ e2e/           # End-to-end —Ç–µ—Å—Ç—ã - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –ø–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ fixtures/      # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îî‚îÄ‚îÄ conftest.py    # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pytest
```

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã
```bash
python run_tests.py all
```

### –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä–æ)
```bash
python run_tests.py unit
```

### –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
```bash
python run_tests.py integration
```

### –¢–æ–ª—å–∫–æ E2E —Ç–µ—Å—Ç—ã
```bash
python run_tests.py e2e
```

### –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (unit + integration)
```bash
python run_tests.py fast
```

### –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (—Ç–æ–ª—å–∫–æ unit)
```bash
python test_quick.py
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ `htmlcov/index.html`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
pip install -r requirements-test.txt
```

### 2. Pre-commit hooks (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
pip install pre-commit
pre-commit install
```

### 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```bash
python test_quick.py
```

## üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë—ã—Å—Ç—Ä—ã–µ –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ

### Integration —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä—É—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ—Å—Ç–æ–≤—É—é –ë–î –≤ –ø–∞–º—è—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å SQL –∑–∞–ø—Ä–æ—Å–æ–≤

### E2E —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä—É—é—Ç –ø–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ò–º–∏—Ç–∏—Ä—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üéØ –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
```python
def test_paintball_calculation():
    result = _calc_summary(5, selections, 'paintball')
    assert result['total_price'] == 4500
```

### Integration —Ç–µ—Å—Ç –ë–î
```python
def test_get_services_by_club(test_db):
    services = get_services_by_club(test_db, club.id)
    assert len(services) == 1
```

### E2E —Ç–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
```python
async def test_complete_calculator_flow():
    # 1. –ù–∞—á–∞—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
    # 2. –í—ã–±—Ä–∞—Ç—å —É—Å–ª—É–≥—É
    # 3. –í—ã–±—Ä–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤
    # 4. –í—ã–±—Ä–∞—Ç—å –¥–æ–ø—ã
    # 5. –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
2. **Unit —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±—ã—Å—Ç—Ä—ã–º–∏ (< 1 —Å–µ–∫)**
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API**
4. **–¢–µ—Å—Ç–æ–≤–∞—è –ë–î —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏**
5. **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å > 80%**

## üîÑ CI/CD

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:
- –ü—Ä–∏ push –≤ main/develop
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request
- –í pre-commit hooks (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –û—Ç—á–µ—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –≤ `htmlcov/`
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏
- GitHub Actions –¥–ª—è CI/CD
