# üóëÔ∏è –ê–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —É–¥–∞–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω—Å–∫—É—é –ø–∞–Ω–µ–ª—å

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —É–¥–∞–ª–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞ (–Ω–∞–∑—ã–≤–∞–µ–º–æ–≥–æ "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º" –≤ —Å–∏—Å—Ç–µ–º–µ) –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏. –ü—Ä–æ—Ü–µ—Å—Å –≤–∫–ª—é—á–∞–µ—Ç:

1. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è** (—Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º)
2. **–ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–ü—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–æ–≤)

---

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### 1Ô∏è‚É£ **–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è** 

**–§–∞–π–ª:** `bot/handlers/admin.py` (–ª–∏–Ω–∏—è 246)

```python
keyboard.append([InlineKeyboardButton("üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞", callback_data=f"admin_delete_confirm_{master_id}")])
```

**–ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞:** —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–∞—Å—Ç–µ—Ä–µ

**–£—Å–ª–æ–≤–∏–µ:** –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–≥–¥–∞ (–¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞)

---

### 2Ô∏è‚É£ **–§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** `admin_delete_confirm()`

**–§–∞–π–ª:** `bot/handlers/admin.py` (–ª–∏–Ω–∏—è 348-419)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ–∫–∞–∑–∞—Ç—å —é–∑–µ—Ä—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç–æ–≥–æ, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ

#### –ü—Ä–æ—Ü–µ—Å—Å:

```
1. –ü–∞—Ä—Å–∏—Ç master_id –∏–∑ callback_data: admin_delete_confirm_{master_id}
2. –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Å—Ç–µ—Ä–µ –∏–∑ –ë–î
3. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
   - –£—Å–ª—É–≥–∏ (Services)
   - –†–∞—Å–ø–∏—Å–∞–Ω–∏—è (WorkPeriods)
   - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (Bookings)
   - –ö–ª–∏–µ–Ω—Ç—ã (Users)
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ë–û–õ–¨–®–û–ï –∫—Ä–∞—Å–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
5. –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç 2 –∫–Ω–æ–ø–∫–∏:
   - "üóëÔ∏è –î–∞, —É–¥–∞–ª–∏—Ç—å" ‚Üí admin_delete_execute_{master_id}
   - "‚ùå –û—Ç–º–µ–Ω–∞" ‚Üí admin_master_detail_{master_id}
```

#### –ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:

```
‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï! –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞

–ú–∞—Å—Ç–µ—Ä: –ò–≤–∞–Ω –ú–∞—Å—Ç–µ—Ä

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –í–°–ï –¥–∞–Ω–Ω—ã–µ:
‚ùå –ü—Ä–æ—Ñ–∏–ª—å –º–∞—Å—Ç–µ—Ä–∞
‚ùå –£—Å–ª—É–≥–∏ (5)
‚ùå –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (12 –ø–µ—Ä–∏–æ–¥–æ–≤)
‚ùå –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (8)
‚ùå –°–≤—è–∑–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ (23)

‚ö†Ô∏è –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–û–ë–†–ê–¢–ò–ú–û!

–ú–∞—Å—Ç–µ—Ä —Å–º–æ–∂–µ—Ç –∑–∞–Ω–æ–≤–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ /start.

–í—ã —É–≤–µ—Ä–µ–Ω—ã?
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

- ‚úÖ –ï—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚ùå –ú–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"
- ‚úÖ –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ ID ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚ùå –û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö"
- ‚úÖ –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `logger.error()`

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```python
logger.info(f"[ADMIN] Delete confirmation requested for master_id={master_id}")
logger.info(f"[ADMIN] Delete confirmation message sent for master_id={master_id}")
logger.error(f"[ADMIN] Error in admin_delete_confirm: {e}", exc_info=True)
```

---

### 3Ô∏è‚É£ **–§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è** `admin_delete_execute()`

**–§–∞–π–ª:** `bot/handlers/admin.py` (–ª–∏–Ω–∏—è 422-479)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞ –∏ –≤—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

#### –ü—Ä–æ—Ü–µ—Å—Å:

```
1. –ü–∞—Ä—Å–∏—Ç master_id –∏–∑ callback_data: admin_delete_execute_{master_id}
2. –ü–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç –º–∞—Å—Ç–µ—Ä–∞ –ò–ó –ë–î
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–º—è –º–∞—Å—Ç–µ—Ä–∞ (–¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
4. –í—ã–∑—ã–≤–∞–µ—Ç delete_master(session, master_id) –∏–∑ –ë–î –º–æ–¥—É–ª—è
5. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ:
   ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –º–∞—Å—Ç–µ—Ä–æ–≤
6. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞:
   ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
   ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥–µ—Ç–∞–ª—è–º –º–∞—Å—Ç–µ—Ä–∞
```

#### –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –î–û —É–¥–∞–ª–µ–Ω–∏—è**: `master_name = str(master.name)` - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏**: –≤—Å–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- **–û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `session.rollback()`

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```python
logger.info(f"[ADMIN] Delete execution requested for master_id={master_id}")
logger.info(f"[ADMIN] Deleting master {master_id} ({master_name})")
logger.info(f"[ADMIN] Master {master_id} ({master_name}) deleted successfully")
logger.error(f"[ADMIN] Failed to delete master {master_id}")
logger.error(f"[ADMIN] Error in admin_delete_execute: {e}", exc_info=True)
```

---

### 4Ô∏è‚É£ **–§—É–Ω–∫—Ü–∏—è –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –ë–î** `delete_master()`

**–§–∞–π–ª:** `bot/database/db.py` (–ª–∏–Ω–∏—è 746-796)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞ –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

#### –ü—Ä–æ—Ü–µ—Å—Å –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è (–í–ê–ñ–ù–û - –ø–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ!):

```python
# 1Ô∏è‚É£ –£–¥–∞–ª—è–µ–º –ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø (Booking)
# ‚Üí –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —É—Å–ª—É–≥–∏

# 2Ô∏è‚É£ –£–¥–∞–ª—è–µ–º –£–°–õ–£–ì–ò (Service)
# ‚Üí –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

# 3Ô∏è‚É£ –£–¥–∞–ª—è–µ–º –ö–ê–¢–ï–ì–û–†–ò–ò –£–°–õ–£–ì (ServiceCategory)
# ‚Üí –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —É—Å–ª—É–≥

# 4Ô∏è‚É£ –£–¥–∞–ª—è–µ–º –†–ê–°–ü–ò–°–ê–ù–ò–ï (WorkPeriod)
# ‚Üí –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ç–∞–±–ª–∏—Ü–∞

# 5Ô∏è‚É£ –£–¥–∞–ª—è–µ–º –°–í–Ø–ó–ò –° –ö–õ–ò–ï–ù–¢–ê–ú–ò (UserMaster)
# ‚Üí —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –º–∞—Å—Ç–µ—Ä–∞

# 6Ô∏è‚É£ –£–¥–∞–ª—è–µ–º —Å–∞–º–æ–≥–æ –ú–ê–°–¢–ï–†–ê
# ‚Üí –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å
```

#### –ö–æ–¥:

```python
def delete_master(session: Session, master_id: int) -> bool:
    try:
        master = get_master_by_id(session, master_id)
        if not master:
            logger.warning(f"Master {master_id} not found for deletion")
            return False
        
        # –£–¥–∞–ª—è–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        bookings = get_bookings_for_master(session, master_id)
        for booking in bookings:
            session.delete(booking)
        
        # –£–¥–∞–ª—è–µ–º —É—Å–ª—É–≥–∏
        services = get_services_by_master(session, master_id, active_only=False)
        for service in services:
            session.delete(service)
        
        # –£–¥–∞–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥
        categories = session.query(ServiceCategory).filter_by(master_account_id=master_id).all()
        for category in categories:
            session.delete(category)
        
        # –£–¥–∞–ª—è–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        work_periods = get_work_periods(session, master_id)
        for period in work_periods:
            session.delete(period)
        
        # –£–¥–∞–ª—è–µ–º —Å–≤—è–∑–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
        user_masters = session.query(UserMaster).filter_by(master_account_id=master_id).all()
        for user_master in user_masters:
            session.delete(user_master)
        
        # –£–¥–∞–ª—è–µ–º –º–∞—Å—Ç–µ—Ä–∞
        session.delete(master)
        
        session.commit()
        logger.info(f"Master {master_id} and all related data deleted successfully")
        return True
        
    except Exception as e:
        session.rollback()
        logger.error(f"Error deleting master {master_id}: {e}", exc_info=True)
        return False
```

---

## üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@require_superadmin`:

```python
def require_superadmin(func):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞"""
    async def wrapper(update: Update, context: ContextTypes.DEFAULT_TYPE):
        user = update.effective_user
        
        logger.info(f"[ADMIN] Checking admin rights for user_id={user.id} in {func.__name__}")
        
        if not is_superadmin(user.id):
            logger.warning(f"[ADMIN] User {user.id} is NOT superadmin, blocking access")
            await update.callback_query.answer("‚ùå –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞", show_alert=True)
            return
        
        logger.info(f"[ADMIN] User {user.id} IS superadmin, allowing access")
        return await func(update, context)
    return wrapper
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** —Ñ—É–Ω–∫—Ü–∏—è `is_superadmin()` –∏–∑ `bot/database/db.py`

---

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö: –ø—Ä–µ–∂–¥–µ ‚Üí –ø–æ—Å–ª–µ

### –î–û –£–î–ê–õ–ï–ù–ò–Ø:

| –¢–∞–±–ª–∏—Ü–∞ | –°–≤—è–∑—å | –ö–æ–ª-–≤–æ |
|---------|-------|--------|
| MasterAccount | –≥–ª–∞–≤–Ω–∞—è | 1 |
| ServiceCategory | master_account_id | N |
| Service | category_id | M |
| WorkPeriod | master_account_id | K |
| UserMaster | master_account_id | L |
| Booking | service_id | P |

### –ü–û–°–õ–ï –£–î–ê–õ–ï–ù–ò–Ø:

```
üóëÔ∏è –í—Å–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª–µ–Ω—ã
–ë–î –æ—á–∏—â–µ–Ω–∞ –æ—Ç –º–∞—Å—Ç–µ—Ä–∞ –∏ –≤—Å–µ—Ö –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

---

## üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π (ConversationHandler)

**–§–∞–π–ª:** `bot/handlers/admin.py` (–ª–∏–Ω–∏—è 735-751)

–§—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è –≤—Ö–æ–¥—è—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ CallbackQueryHandler)

```python
entry_points=[
    CallbackQueryHandler(admin_block_master, pattern=r'^admin_block_\d+$'),
    CallbackQueryHandler(admin_search_master_start, pattern='^admin_search_master$'),
]
# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π CallbackQueryHandler
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. **–ù–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å**
- –î–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ
- –û—Ç–∫–∞—Ç –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –ë–î
- –ú–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç –∑–∞–Ω–æ–≤–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º**
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, —Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
- –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞"

### 3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å timestamps
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è ID –º–∞—Å—Ç–µ—Ä–∞ –∏ –µ–≥–æ –∏–º—è
- –ó–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### 4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ë–î**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (session.commit/rollback)
- –£–¥–∞–ª–µ–Ω–∏–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (respect foreign keys)
- –ù–µ—Ç orphaned –¥–∞–Ω–Ω—ã—Ö

### 5. **UX**
- –ö—Ä–∞—Å–∏–≤—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–µ —ç–º–æ–¥–∑–∏ (‚ö†Ô∏è, üóëÔ∏è, ‚ùå)
- –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥

---

## üéÆ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π: –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞ "–ò–≤–∞–Ω" (ID: 123)

```
–ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞"
         ‚Üì
–ë–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è: callback_data="admin_delete_confirm_123"
         ‚Üì
admin_delete_confirm() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
         ‚Üì
–ë–æ—Ç –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç:
  - 5 —É—Å–ª—É–≥
  - 12 –ø–µ—Ä–∏–æ–¥–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
  - 8 –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
  - 23 –∫–ª–∏–µ–Ω—Ç–∞
         ‚Üì
–ë–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ë–û–õ–¨–®–û–ï –ö–†–ê–°–ù–û–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï
—Å –∫–Ω–æ–ø–∫–∞–º–∏:
  [üóëÔ∏è –î–∞, —É–¥–∞–ª–∏—Ç—å] [‚ùå –û—Ç–º–µ–Ω–∞]
         ‚Üì
–ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "üóëÔ∏è –î–∞, —É–¥–∞–ª–∏—Ç—å"
         ‚Üì
admin_delete_execute() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
         ‚Üì
delete_master() –∏–∑ –ë–î –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
         ‚Üì
–ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
  1. 8 –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π ‚úì
  2. 5 —É—Å–ª—É–≥ ‚úì
  3. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ ‚úì
  4. 12 —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π ‚úì
  5. 23 —Å–≤—è–∑–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ ‚úì
  6. –°–∞–º –º–∞—Å—Ç–µ—Ä "–ò–≤–∞–Ω" ‚úì
         ‚Üì
session.commit() - –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
         ‚Üì
–ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç: "‚úÖ –ú–∞—Å—Ç–µ—Ä –ò–≤–∞–Ω –∏ –≤—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã"
—Å –∫–Ω–æ–ø–∫–æ–π "‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É –º–∞—Å—Ç–µ—Ä–æ–≤"
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------|-----------|
| `get_master_by_id()` | db.py | –ü–æ–ª—É—á–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞ |
| `get_services_by_master()` | db.py | –ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥–∏ |
| `get_work_periods()` | db.py | –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ |
| `get_bookings_for_master()` | db.py | –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| `get_master_clients_count()` | db.py | –°—á–µ—Ç—á–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| `is_superadmin()` | db.py | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ |
| `block_master()` | db.py | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞) |
| `unblock_master()` | db.py | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞) |

---

## üìù –ò—Ç–æ–≥–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–¥–∞–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º–∞—Å—Ç–µ—Ä–∞):**

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–µ–Ω** - –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ  
‚úÖ **–ù–∞–¥–µ–∂–µ–Ω** - –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ  
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º** - –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–ó–∞—â–∏—â–µ–Ω** - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–æ–≤  
‚úÖ **User-friendly** - –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏  
‚úÖ **–ù–µ–æ–±—Ä–∞—Ç–∏–º** - –∫–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è (soft delete)
2. **–í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ** –¥–ª—è –æ—Ç–º–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 24 —á–∞—Å–∞)
3. **Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
4. **–ò—Å—Ç–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∏–π** –≤ –ª–æ–≥–∞—Ö —Å –¥–µ—Ç–∞–ª—è–º–∏
5. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
6. **Audit trail** - –∫—Ç–æ —É–¥–∞–ª–∏–ª –∏ –∫–æ–≥–¥–∞

