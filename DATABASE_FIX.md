# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞: `sqlalchemy.exc.OperationalError: no such column: services.master_account_id`

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ö–µ–º–æ–π (–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ paintball), –≥–¥–µ —Ç–∞–±–ª–∏—Ü–∞ `services` –∏–º–µ–ª–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ backup (`database.db.backup`)
2. ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –ë–î
3. ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å backup
copy database.db database.db.backup

# 2. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î
del database.db

# 3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å (–±–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
python run_master.py
```

–ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
python fix_database.py
```

---

## üîç –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°—Ç–∞—Ä–∞—è –ë–î —É–¥–∞–ª–µ–Ω–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ Backup —Å–æ—Ö—Ä–∞–Ω–µ–Ω (`database.db.backup`)

### 2. –ö–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è `delete_message`

---

## üìã –ù–æ–≤–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `services`:
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `master_account_id` - ID –º–∞—Å—Ç–µ—Ä–∞ (–Ω–æ–≤–æ–µ –ø–æ–ª–µ)
- `category_id` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `price` - —Ü–µ–Ω–∞
- `duration_mins` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
- `cooling_period_mins` - –ø–µ—Ä–∏–æ–¥ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è
- `active` - –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏ —É—Å–ª—É–≥–∞
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –¥—Ä—É–≥—É—é –º–∞—à–∏–Ω—É:**

1. **–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   del database.db
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç—ã** - –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç –Ω–æ–≤—É—é –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π:
   ```bash
   python run_master.py
   python run_client.py
   ```

3. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   python fix_database.py
   ```

---

## üîÑ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ë–æ—Ç—ã –±—ã–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã —Å –Ω–æ–≤–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. –¢–µ–ø–µ—Ä—å:

1. ‚úÖ QR-–∫–æ–¥ –¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤ (—Ç–∞–∫ –∫–∞–∫ –ë–î –±—ã–ª–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞)

---

## üìù –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ –∫–∞–∫ –º–∞—Å—Ç–µ—Ä:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –º–∞—Å—Ç–µ—Ä-–±–æ—Ç–∞
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é QR:**
   - –ù–∞–∂–º–∏—Ç–µ "üì± QR-–∫–æ–¥ –∏ —Å—Å—ã–ª–∫–∞"
   - –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è QR-–∫–æ–¥ –∏ —Å—Å—ã–ª–∫–∞

3. **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python check_dependencies.py`

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–î–∞—Ç–∞:** 2025

