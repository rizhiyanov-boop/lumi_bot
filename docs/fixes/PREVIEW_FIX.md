# Исправление: Удаление превью ссылок

## Проблема
При редактировании адреса локации (особенно при вводе ссылки на Яндекс.Карты), Telegram автоматически создавал превью ссылки, и это сообщение оставалось в истории чата, загромождая интерфейс.

## Решение
Добавлено автоматическое удаление сообщений пользователя после обработки ввода во всех ConversationHandler'ах редактирования.

### Затронутые функции

#### Редактирование локации:
- `owner_location_edit_name_finish` - удаление после ввода названия
- `owner_location_edit_address_finish` - удаление после ввода адреса (с превью карт)
- `owner_location_edit_desc_finish` - удаление после ввода описания

#### Редактирование поля:
- `owner_field_edit_name_finish` - удаление после ввода названия
- `owner_field_edit_price_finish` - удаление после ввода цены
- `owner_field_edit_desc_finish` - удаление после ввода описания

### Техническая реализация

Во всех обработчиках завершения редактирования добавлен следующий код:

```python
# Удаляем сообщение пользователя
try:
    await update.message.delete()
except:
    pass
```

Код обернут в `try-except`, чтобы избежать ошибок, если сообщение по каким-то причинам не может быть удалено (например, слишком старое или уже удалено).

### Результат

✅ История чата остается чистой
✅ Превью ссылок на карты автоматически удаляются
✅ UX улучшен - нет визуального шума в истории сообщений
✅ Работает для всех типов редактирования (название, адрес, описание, цена)

### Файлы
- `bot/handlers/roles.py` - обновлены все `*_finish` функции ConversationHandler'ов

### Дата изменений
28 октября 2025

