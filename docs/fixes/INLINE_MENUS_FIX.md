# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –í—ã–Ω–æ—Å –ø–∞–Ω–µ–ª–µ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏

## üîß –ü—Ä–æ–±–ª–µ–º–∞

–ü–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–°—É–ø–µ—Ä–∞–¥–º–∏–Ω, –í–ª–∞–¥–µ–ª–µ—Ü –∫–ª—É–±–∞, –°—Ç–∞—Ä—à–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä) –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã (`/superadmin`, `/owner`, `/senior`, `/instructor`), –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤ –≤–∏–¥–µ inline-–∫–Ω–æ–ø–æ–∫.

## ‚ú® –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_main_menu_keyboard` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –ø–∞–Ω–µ–ª–µ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `bot/keyboards/inline.py`

–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_main_menu_keyboard`:

```python
def get_main_menu_keyboard(is_admin: bool = False, user_roles: dict = None) -> InlineKeyboardMarkup:
    """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ —Ä–æ–ª–µ–π"""
    keyboard = [
        [InlineKeyboardButton("üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É", callback_data="book")],
        [InlineKeyboardButton("üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", callback_data="my_bookings")],
        [InlineKeyboardButton("‚ÑπÔ∏è –ü–æ–º–æ—â—å", callback_data="help")],
    ]
    
    # –ü–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–µ–π
    if user_roles:
        if user_roles.get('is_superadmin'):
            keyboard.append([InlineKeyboardButton("üîê –°—É–ø–µ—Ä–∞–¥–º–∏–Ω", callback_data="superadmin_panel")])
        
        if user_roles.get('is_owner'):
            keyboard.append([InlineKeyboardButton("üë®‚Äçüíº –í–ª–∞–¥–µ–ª–µ—Ü –∫–ª—É–±–∞", callback_data="owner_panel")])
        
        if user_roles.get('is_senior'):
            keyboard.append([InlineKeyboardButton("üß≠ –°—Ç–∞—Ä—à–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", callback_data="senior_panel")])
        
        if user_roles.get('is_instructor'):
            keyboard.append([InlineKeyboardButton("üéØ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", callback_data="instructor_panel")])
    
    # –°—Ç–∞—Ä–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    if is_admin:
        keyboard.append([InlineKeyboardButton("üë®‚Äçüíº –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å", callback_data="admin_panel")])
    
    return InlineKeyboardMarkup(keyboard)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `is_admin` - –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä–æ–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é
- `user_roles` - —Å–ª–æ–≤–∞—Ä—å —Å —Ä–æ–ª—è–º–∏:
  ```python
  {
      'is_superadmin': bool,
      'is_owner': bool,
      'is_senior': bool,
      'is_instructor': bool
  }
  ```

#### 2. `bot/handlers/user.py`

–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–µ–π –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –∏—Ö –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É:

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `start_command` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª–∏ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
- `main_menu_callback` - –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å —Ä–æ–ª—è–º–∏
- `help_command` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ä–æ–ª—è–º–∏
- `unknown_command` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å —Ä–æ–ª—è–º–∏

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**
```python
from bot.database.db import is_superadmin, get_user_club_roles

with get_session() as session:
    user_is_admin = is_admin(session, user.id)
    club_id = context.user_data.get('club_id', 1)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–æ–ª–∏
    is_super = is_superadmin(user.id)
    roles = get_user_club_roles(session, user.id, club_id)
    has_owner = any(r.role.value == 'club_owner' for r in roles)
    has_senior = any(r.role.value == 'senior_instructor' for r in roles)
    has_instructor = any(r.role.value == 'instructor' for r in roles)
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ª–æ–≤–∞—Ä—å —Ä–æ–ª–µ–π –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    user_roles = {
        'is_superadmin': is_super,
        'is_owner': has_owner,
        'is_senior': has_senior,
        'is_instructor': has_instructor
    }

# –ü–µ—Ä–µ–¥–∞–µ–º –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
reply_markup=get_main_menu_keyboard(user_is_admin, user_roles)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```
üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚ÑπÔ∏è –ü–æ–º–æ—â—å
```

### –î–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞:
```
üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚ÑπÔ∏è –ü–æ–º–æ—â—å
üîê –°—É–ø–µ—Ä–∞–¥–º–∏–Ω
```

### –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–ª—É–±–∞:
```
üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚ÑπÔ∏è –ü–æ–º–æ—â—å
üë®‚Äçüíº –í–ª–∞–¥–µ–ª–µ—Ü –∫–ª—É–±–∞
```

### –î–ª—è —Å—Ç–∞—Ä—à–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:
```
üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚ÑπÔ∏è –ü–æ–º–æ—â—å
üß≠ –°—Ç–∞—Ä—à–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
```

### –î–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:
```
üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚ÑπÔ∏è –ü–æ–º–æ—â—å
üéØ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
```

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–æ–ª—è–º–∏:
```
üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚ÑπÔ∏è –ü–æ–º–æ—â—å
üîê –°—É–ø–µ—Ä–∞–¥–º–∏–Ω
üë®‚Äçüíº –í–ª–∞–¥–µ–ª–µ—Ü –∫–ª—É–±–∞
üß≠ –°—Ç–∞—Ä—à–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–¥–æ–±—Å—Ç–≤–æ** - –≤—Å–µ –ø–∞–Ω–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä—è–º–æ –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–Ω–æ–ø–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–æ–ª—è–º–∏
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π —É –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –∫–æ–º–∞–Ω–¥—ã (`/owner`, `/senior` –∏ —Ç.–¥.) –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞—é—Ç

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `/start` –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É "¬´ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
2. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö —Ä–æ–ª–µ–π, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–∞–Ω–µ–ª–µ–π
3. –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä–æ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 28.10.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

