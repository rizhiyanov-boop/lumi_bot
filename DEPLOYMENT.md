# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –±–æ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å Telegram-–±–æ—Ç–æ–≤ Lumi –Ω–∞ –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–º Linux-—Å–µ—Ä–≤–µ—Ä–µ.

> **üí° –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤**: –ï—Å–ª–∏ –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏, –Ω–∞—á–Ω–∏—Ç–µ —Å —Ñ–∞–π–ª–∞ **[DEPLOYMENT_FOR_BEGINNERS.md](DEPLOYMENT_FOR_BEGINNERS.md)** - —Ç–∞–º –≤—Å–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–æ –ø–æ—à–∞–≥–æ–≤–æ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–µ—Ä–≤–µ—Ä—É)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
6. [–ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ systemd](#–∑–∞–ø—É—Å–∫-–±–æ—Ç–æ–≤-—á–µ—Ä–µ–∑-systemd)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–¥–ª—è API)](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx-–¥–ª—è-api)
8. [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏)
10. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–±–æ—Ç–æ–≤)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Ä–µ–∞–ª—å–Ω—ã–µ):
- **–û–°**: Ubuntu 22.04 LTS / Ubuntu 24.04 LTS / Debian 11+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Ubuntu 24.04 LTS)
- **RAM**: 512 MB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1 GB –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
- **CPU**: 1 —è–¥—Ä–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1 —è–¥—Ä–æ, 2 –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–∞)
- **–î–∏—Å–∫**: 3 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 5 GB —Å –∑–∞–ø–∞—Å–æ–º –¥–ª—è –ª–æ–≥–æ–≤ –∏ –±—ç–∫–∞–ø–æ–≤)
- **–°–µ—Ç—å**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**: KVM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ XEN HVM

### –†–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:
- **RAM**: ~300-400 MB (–æ–±–∞ –±–æ—Ç–∞ + —Å–∏—Å—Ç–µ–º–∞)
- **–î–∏—Å–∫**: ~500 MB (–∫–æ–¥ + –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- **CPU**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–±–æ—Ç—ã –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞:
- **CPU**: 1 —è–¥—Ä–æ √ó 3.6 GHz
- **RAM**: 1 GB
- **–î–∏—Å–∫**: 80 GB HDD (–∏–ª–∏ 20 GB SSD, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- **–û–°**: Ubuntu 24.04 LTS
- **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**: KVM
- **–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ü–û**: –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (—á–∏—Å—Ç—ã–π —Å–µ—Ä–≤–µ—Ä)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: ~300-400 ‚ÇΩ/–º–µ—Å—è—Ü

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã:
- `443` (HTTPS) - –¥–ª—è API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `80` (HTTP) - –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ HTTPS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@your-server-ip
# –∏–ª–∏
ssh your-username@your-server-ip
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# Ubuntu/Debian
sudo apt update && sudo apt upgrade -y

# CentOS/RHEL
sudo yum update -y
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```bash
# Ubuntu/Debian
sudo apt install -y git curl wget build-essential python3-pip python3-venv nginx supervisor

# CentOS/RHEL
sudo yum install -y git curl wget gcc python3 python3-pip nginx supervisor
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–æ—Ç–æ–≤

```bash
# –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo useradd -m -s /bin/bash lumi
sudo usermod -aG sudo lumi  # –î–∞–µ–º –ø—Ä–∞–≤–∞ sudo (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo su - lumi
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
cd /home/lumi
git clone https://github.com/your-username/lumi_bot.git
cd lumi_bot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
mkdir -p /home/lumi/lumi_bot/logs
mkdir -p /home/lumi/lumi_bot/backups
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
chmod +x run_master.py
chmod +x run_client.py
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env

```bash
cd /home/lumi/lumi_bot
nano .env
```

### 2. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ .env

```env
# Telegram Bot Tokens
BOT_TOKEN=your_master_bot_token_here
CLIENT_BOT_TOKEN=your_client_bot_token_here
CLIENT_BOT_USERNAME=your_client_bot_username

# Database
DATABASE_URL=sqlite:///database.db

# Super Admins (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
SUPER_ADMINS=123456789,987654321

# YooKassa Payment Configuration
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
YOOKASSA_TEST_MODE=false

# Premium subscription
PREMIUM_PRICE=299.00
PREMIUM_DURATION_DAYS=30

# OpenAI API (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π)
OPENAI_API_KEY=your_openai_api_key
```

### 3. –ó–∞—â–∏—Ç–∞ —Ñ–∞–π–ª–∞ .env

```bash
chmod 600 .env
```

## –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ systemd

### 1. –°–æ–∑–¥–∞–Ω–∏–µ service —Ñ–∞–π–ª–∞ –¥–ª—è Master Bot

```bash
sudo nano /etc/systemd/system/lumi-master.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```ini
[Unit]
Description=Lumi Master Bot
After=network.target

[Service]
Type=simple
User=lumi
Group=lumi
WorkingDirectory=/home/lumi/lumi_bot
Environment="PATH=/home/lumi/lumi_bot/venv/bin"
ExecStart=/home/lumi/lumi_bot/venv/bin/python /home/lumi/lumi_bot/run_master.py
Restart=always
RestartSec=10
StandardOutput=append:/home/lumi/lumi_bot/logs/master.log
StandardError=append:/home/lumi/lumi_bot/logs/master_error.log

[Install]
WantedBy=multi-user.target
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ service —Ñ–∞–π–ª–∞ –¥–ª—è Client Bot

```bash
sudo nano /etc/systemd/system/lumi-client.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```ini
[Unit]
Description=Lumi Client Bot
After=network.target

[Service]
Type=simple
User=lumi
Group=lumi
WorkingDirectory=/home/lumi/lumi_bot
Environment="PATH=/home/lumi/lumi_bot/venv/bin"
ExecStart=/home/lumi/lumi_bot/venv/bin/python /home/lumi/lumi_bot/run_client.py
Restart=always
RestartSec=10
StandardOutput=append:/home/lumi/lumi_bot/logs/client.log
StandardError=append:/home/lumi/lumi_bot/logs/client_error.log

[Install]
WantedBy=multi-user.target
```

### 3. –ó–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º systemd
sudo systemctl daemon-reload

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable lumi-master.service
sudo systemctl enable lumi-client.service

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç—ã
sudo systemctl start lumi-master.service
sudo systemctl start lumi-client.service

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo systemctl status lumi-master.service
sudo systemctl status lumi-client.service
```

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
sudo systemctl stop lumi-master.service
sudo systemctl stop lumi-client.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl restart lumi-master.service
sudo systemctl restart lumi-client.service

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u lumi-master.service -f
sudo journalctl -u lumi-client.service -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤
sudo journalctl -u lumi-master.service -n 100
sudo journalctl -u lumi-client.service -n 100
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–¥–ª—è API)

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω API –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

### 1. –°–æ–∑–¥–∞–Ω–∏–µ service —Ñ–∞–π–ª–∞ –¥–ª—è API

```bash
sudo nano /etc/systemd/system/lumi-api.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```ini
[Unit]
Description=Lumi API Server
After=network.target

[Service]
Type=simple
User=lumi
Group=lumi
WorkingDirectory=/home/lumi/lumi_bot/mobile_app/api
Environment="PATH=/home/lumi/lumi_bot/venv/bin"
ExecStart=/home/lumi/lumi_bot/venv/bin/python /home/lumi/lumi_bot/mobile_app/api/run_api.py
Restart=always
RestartSec=10
StandardOutput=append:/home/lumi/lumi_bot/logs/api.log
StandardError=append:/home/lumi/lumi_bot/logs/api_error.log

[Install]
WantedBy=multi-user.target
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

```bash
sudo nano /etc/nginx/sites-available/lumi-api
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
sudo ln -s /etc/nginx/sites-available/lumi-api /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ certbot
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
```

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
nano /home/lumi/lumi_bot/backup.sh
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```bash
#!/bin/bash

BACKUP_DIR="/home/lumi/lumi_bot/backups"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/lumi_backup_$DATE.tar.gz"

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤
tar -czf "$BACKUP_FILE" \
    /home/lumi/lumi_bot/database.db \
    /home/lumi/lumi_bot/.env \
    /home/lumi/lumi_bot/logs

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find "$BACKUP_DIR" -name "lumi_backup_*.tar.gz" -mtime +30 -delete

echo "Backup created: $BACKUP_FILE"
```

–î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x /home/lumi/lumi_bot/backup.sh
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (cron)

```bash
crontab -e
```

–î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ –≤ 3:00 –Ω–æ—á–∏:

```
0 3 * * * /home/lumi/lumi_bot/backup.sh >> /home/lumi/lumi_bot/logs/backup.log 2>&1
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –õ–æ–≥–∏ Master Bot
tail -f /home/lumi/lumi_bot/logs/master.log

# –õ–æ–≥–∏ Client Bot
tail -f /home/lumi/lumi_bot/logs/client.log

# –õ–æ–≥–∏ —á–µ—Ä–µ–∑ systemd
sudo journalctl -u lumi-master.service -f
sudo journalctl -u lumi-client.service -f
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU
htop

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ü—Ä–æ—Ü–µ—Å—Å—ã –±–æ—Ç–æ–≤
ps aux | grep python
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤

```bash
sudo nano /etc/logrotate.d/lumi-bots
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```
/home/lumi/lumi_bot/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    notifempty
    missingok
    create 0640 lumi lumi
}
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
nano /home/lumi/lumi_bot/update.sh
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```bash
#!/bin/bash

cd /home/lumi/lumi_bot

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
./backup.sh

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç—ã
sudo systemctl stop lumi-master.service
sudo systemctl stop lumi-client.service

# –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
git pull origin master

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç—ã
sudo systemctl start lumi-master.service
sudo systemctl start lumi-client.service

echo "Update completed!"
```

–î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x /home/lumi/lumi_bot/update.sh
```

### 2. –ó–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
./update.sh
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
sudo systemctl status lumi-master.service lumi-client.service lumi-api.service
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ü–∞–º—è—Ç—å
free -h

# –î–∏—Å–∫
df -h

# CPU –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã
top
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –±–æ—Ç–æ–≤

```bash
sudo systemctl restart lumi-master.service lumi-client.service
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫

```bash
sudo journalctl -u lumi-master.service -p err -n 50
sudo journalctl -u lumi-client.service -p err -n 50
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   sudo journalctl -u lumi-master.service -n 100
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env:
   ```bash
   cat /home/lumi/lumi_bot/.env
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   ```bash
   ls -la /home/lumi/lumi_bot/
   ```

### –ë–æ—Ç –ø–∞–¥–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:
   ```bash
   free -h
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫:
   ```bash
   tail -f /home/lumi/lumi_bot/logs/master_error.log
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:
   ```bash
   sudo systemctl status lumi-master.service
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   ls -la /home/lumi/lumi_bot/database.db
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é:
   ```bash
   cp /home/lumi/lumi_bot/database.db /home/lumi/lumi_bot/database.db.backup
   ```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
# Ubuntu/Debian
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable

# CentOS/RHEL
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

### 2. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ root-–¥–æ—Å—Ç—É–ø–∞ –ø–æ SSH

```bash
sudo nano /etc/ssh/sshd_config
```

–ò–∑–º–µ–Ω–∏—Ç–µ:
```
PermitRootLogin no
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ SSH:
```bash
sudo systemctl restart sshd
```

### 3. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
0 2 * * 0 apt update && apt upgrade -y
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub

---

**–£–¥–∞—á–∏ —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º! üöÄ**

